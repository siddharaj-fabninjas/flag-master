<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlagMaster SRS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button id="theme-toggle" class="icon-btn" aria-label="Toggle dark mode" title="Toggle theme (T)">üåô</button>
        </div>
        <h1 class="app-title">üè¥ FlagMaster</h1>
        <div class="header-right">
            <button id="settings-btn" class="icon-btn" aria-label="Open settings" title="Settings (S)">‚öôÔ∏è</button>
        </div>
    </header>

    <!-- HUD Stats -->
    <div class="hud" role="status" aria-live="polite">
        <span class="hud-item">üî• <span id="streak" class="stat">0</span></span>
        <span class="hud-item">‚≠ê <span id="xp" class="stat">0</span></span>
        <span class="hud-item">üìö Learned: <span id="graduated-count" class="stat">0</span></span>
        <span class="hud-item">üéØ Learning: <span id="learning-count" class="stat">0</span></span>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container" id="progress-container">
        <div class="progress-text">
            <span id="progress-label">Cards in Queue</span>
            <span id="progress-count">0</span>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
    </div>

    <!-- Game Area -->
    <main class="game-container">
        <div id="game-area">
            <article id="card" class="card" role="region" aria-label="Flashcard">
                <span id="card-state-badge" class="card-state-badge learning" style="display:none;">Learning</span>
                <div class="flag-wrapper">
                    <div class="flag-indicators">
                        <span id="flag-indicator-icon" class="flag-indicator-icon">üéØ</span>
                        <div id="flag-indicator-dots" class="flag-indicator-dots">
                            <span class="dot" id="indicator-dot-1"></span>
                            <span class="dot" id="indicator-dot-2"></span>
                            <span class="dot" id="indicator-dot-3"></span>
                        </div>
                    </div>
                    <div class="flag-container">
                        <div id="flag-placeholder" class="flag-placeholder">üè≥Ô∏è</div>
                        <img id="flag-img" class="flag-img" src="" alt="Country flag to identify">
                    </div>
                </div>
                <div id="learning-progress" class="learning-progress hidden">
                    <span class="label">Progress:</span>
                    <div class="dots">
                        <span class="dot" id="dot-1"></span>
                        <span class="dot" id="dot-2"></span>
                        <span class="dot" id="dot-3"></span>
                    </div>
                </div>
                <span id="difficulty-badge" class="difficulty-badge tier-1">Easy</span>
                <h2 id="country-name" class="country-name" aria-live="polite">Country Name</h2>

                <button id="show-btn" class="show-answer-btn" aria-describedby="keyboard-hint">
                    Show Answer
                </button>

                <div id="rating-area" class="rating-area" role="group" aria-label="Rate your recall">
                    <button class="rate-btn btn-again" data-rating="again" aria-label="Again - review in 1 minute">
                        Again
                        <span class="interval" id="interval-again">1m</span>
                    </button>
                    <button class="rate-btn btn-hard" data-rating="hard" aria-label="Hard - review later">
                        Hard
                        <span class="interval" id="interval-hard">1d</span>
                    </button>
                    <button class="rate-btn btn-good" data-rating="good" aria-label="Good - review in a few days">
                        Good
                        <span class="interval" id="interval-good">3d</span>
                    </button>
                    <button class="rate-btn btn-easy" data-rating="easy" aria-label="Easy - review in a week">
                        Easy
                        <span class="interval" id="interval-easy">7d</span>
                    </button>
                </div>

                <p class="keyboard-hint" id="keyboard-hint">
                    <span class="key">Space</span> show ¬∑ <span class="key">1-4</span> rate
                </p>

                <!-- Memory Hint Section -->
                <div id="hint-section" class="hint-section">
                    <div class="hint-header">
                        <span>üí°</span> Memory Tip
                    </div>
                    <div class="hint-content">
                        <div id="hint-mnemonic" class="hint-mnemonic"></div>
                        <div id="hint-symbolism" class="hint-symbolism">
                            <div class="hint-symbolism-title">Color Meanings</div>
                            <div id="color-meanings" class="color-meanings"></div>
                        </div>
                        <div id="similar-flags" class="similar-flags">
                            <div class="similar-flags-title">‚ö†Ô∏è Don't Confuse With</div>
                            <div id="similar-flags-list"></div>
                        </div>
                    </div>
                </div>

                <!-- World Map Location Section -->
                <div id="map-region-label" class="map-region-label"></div>
                <div id="map-section" class="map-container">
                    <img
                        class="world-map-img"
                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Equirectangular_projection_SW.jpg/1280px-Equirectangular_projection_SW.jpg"
                        alt="World map"
                        loading="lazy"
                    >
                    <div id="map-marker" class="map-marker" style="display: none;"></div>
                </div>

            </article>
        </div>
        <div id="message-area" class="finished-msg" style="display: none;" role="status" aria-live="polite"></div>
    </main>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay" role="dialog" aria-labelledby="modal-title" aria-modal="true">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title" class="modal-title">‚öôÔ∏è Settings</h2>
                <button id="close-modal" class="close-btn" aria-label="Close settings">&times;</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-value" id="stat-graduated">0</div>
                    <div class="stat-card-label">Flags Learned</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-value" id="stat-learning">0</div>
                    <div class="stat-card-label">In Progress</div>
                </div>
            </div>

            <div class="setting-group">
                <label class="setting-label" for="session-limit">Cards Per Session</label>
                <p class="setting-description">Limit how many new cards to study per session (0 = unlimited)</p>
                <input type="number" id="session-limit" class="setting-input" min="0" max="100" value="20">
            </div>

            <div class="setting-group">
                <label class="setting-label">Reset Progress</label>
                <p class="setting-description">This will clear all your learning progress and stats.</p>
                <button id="reset-btn" class="danger-btn">Reset All Progress</button>
            </div>

            <details class="advanced-section">
                <summary class="advanced-toggle">üîß Advanced Options</summary>
                <div class="advanced-content">
                    <div class="setting-group">
                        <label class="setting-label">Export Data</label>
                        <p class="setting-description">Download all your progress as a JSON file for backup.</p>
                        <button id="export-btn" class="secondary-btn">üì• Export Data</button>
                    </div>

                    <div class="setting-group">
                        <label class="setting-label">Import Data</label>
                        <p class="setting-description">Restore progress from a previously exported JSON file.</p>
                        <input type="file" id="import-file" accept=".json" style="display: none;">
                        <button id="import-btn" class="secondary-btn">üì§ Import Data</button>
                        <div id="import-status" class="import-status"></div>
                    </div>
                </div>
            </details>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
